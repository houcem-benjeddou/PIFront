<div class="container-fluid px-4">
  <!-- Carte pour la recherche -->
  <mat-card>
    <mat-card-header>
      <mat-card-title>Analyse Financière</mat-card-title>
      <mat-card-subtitle>
        Entrez un symbole pour obtenir des données financières.
      </mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <div class="input-group mt-2">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Symbole</mat-label>
          <input
            matInput
            [(ngModel)]="searchSymbol"
            placeholder="Entrez un symbole (ex : AAPL)"
          />
        </mat-form-field>
        <button
          mat-raised-button
          color="primary"
          class="mt-2"
          (click)="searchFinancialData()"
        >
          Rechercher
        </button>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Tableau des résultats -->
  <div *ngIf="financialData" class="mt-4">
    <p-table [value]="[financialData]" responsiveLayout="scroll">
      <ng-template pTemplate="header">
        <tr>
          <th>Métrique</th>
          <th>Valeur</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-item>
        <tr *ngFor="let key of financialData | keyvalue">
          <td>{{ key.key }}</td>
          <td>{{ key.value }}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <!-- Graphique -->
  <div class="mt-4">
    <h3>Graphique des Données Clés</h3>
    <canvas id="financialChart" class="w-100"></canvas>
  </div>
</div>
